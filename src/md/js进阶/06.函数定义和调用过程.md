## 函数定义和调用过程

函数->定义->调用->执行->结束

## 执行上下文

#### JavaScript 是一种具有函数优先级的轻量级，解释型或即时编译型的编程语言

- 编译型语言写的程序执行之前，需要编译过程，把所有程序编译成为机器语言的文件
- 解释型语言在运行程序的时候才编译，每执行一段代码就要翻译一段代码
- 两种的区别在于**编译的时机不同**

#### JavaScript 代码的执行过程

- JavaScript 引擎是一段一段地运行代码的
- JavaScript 代码执行时，会为当前代码创建相应地运行环境

#### JavaScript 运行环境

- 全局环境：代码运行起来后会进入全局环境
- 函数环境：当函数被调用执行时，会进入当前函数中执行代码
- eval 环境：不建议使用

#### 执行上下文

- 可以理解为当前代码地运行环境
- 作用是用来保存当前代码运行时所需要地数据
- 在全局环境、函数环境中会创建执行上下文

#### 执行上下文栈（ECS）

- 执行上下文栈**按照函数地调用顺序**来管理执行上下文
- **栈底**永远时全局上下文，**栈顶**时当前正在执行地函数
- 特点：先进后出

#### 函数执行时会创建执行上下文

```javascript
//全局上下文入栈
function f1() {
  var n = 999;
  function f2() {
    console.log(n++);
  }
  return f2;
}
var result = f1(); //f1 EC入栈
// f1 EC出栈
result(); // f2 result EC入栈
// f2 result EC出栈
```

#### 生命周期

- 当一个函数调用时，一个新的执行上下文就会被创建
- 执行上下文地生命周期
  - 创建阶段
  - 执行阶段
  - 等待回收阶段

<!-- ![image-20220225104241084](../.vitepress/assets/image/image-20220225104241084.png) -->

每个执行上下文都有一个与之关联的**变量对象**和一个作用域链

#### return 语句

return 语句地作用

- 返回值
- 终止函数地执行：销毁当前执行上下文，弹出执行上下文栈

## 变量对象
